# 4.1.6 `/api/v1/ai/customer_clv_forecast`
+> Nota: traducción generada automáticamente desde el inglés; revisar antes de publicar.


### Propósito
Predict dollar-value CLV over 6-, 12-, 36-month horizons; auto-select best model (BG/NBD + Gamma-Gamma or GBM).

---

### Headers `X-Customer-Api-Id`, `X-Secret`

| Header               | Value      |
|----------------------|------------|
| `X-Customer-Api-Id`  | `<uuid>`   |
| `X-Secret`           | `<secret>` |
| `Content-Type`       | `application/json` |

### Solicitud

```yml
POST https://api-prod.abintel.ai/api/v1/ai/customer_clv_forecast
Content-Type: application/json

{
  "horizon_months": 6,
  "today": "2025-04-24",
  "customers": [
    {
      "customer_id": "C-1001",
      "transactions": [
        { "date": "2024-01-15", "amount": 250, "cost": 140 },
        { "date": "2024-05-10", "amount": 480, "cost": 270 }
      ]
    },
    {
      "customer_id": "C-1002",
      "transactions": [
        { "date": "2024-02-20", "amount": 350, "cost": 220 },
        { "date": "2024-06-18", "amount": 500, "cost": 320 }
      ]
    }
  ]
}
```


#### Ejemplo de Respuesta
```json
{
  "best_algorithm": "GradientBoosting",
  "horizon_months": 6,
  "evaluation_mae": { "GradientBoosting": 188.0 },
  "customers": [
    {
      "customer_id": "C-1001",
      "predicted_clv": 188.0,
      "algorithm_used": "GradientBoosting",
      "clv_tier": "Low",
      "interpretation": "…Consider automated win-back.",
      "explanations": {}
    },
    {
      "customer_id": "C-1002",
      "predicted_clv": 225.0,
      "algorithm_used": "GradientBoosting",
      "clv_tier": "Medium",
      "interpretation": "…Consistent spender, nurture with loyalty offers.",
      "explanations": {}
    }
  ]
}
```

### Claves de la Respuesta

| Key Path                         | Type        | Meaning                                                  | Usage                                   |
|-----------------------------------|-------------|----------------------------------------------------------|-----------------------------------------|
| `best_algorithm`                  | string      | Model with best performance                              | For ML/Ops and reporting                |
| `horizon_months`                  | int         | Forecast window in months                                | Align with business planning            |
| `evaluation_mae`                  | object      | Mean absolute error per algorithm                        | Model selection/monitoring              |
| `customers[].predicted_clv`       | float       | Predicted CLV value for given horizon                    | Use in segmentation, targeting, etc     |
| `customers[].clv_tier`            | enum        | Tier (Low/Medium/High) based on predicted CLV            | For campaign targeting                  |
| `customers[].interpretation`      | string      | Plain-language business summary                          | For executive dashboards                |

---

